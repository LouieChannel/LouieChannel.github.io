<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Перечень команд на воркшоп 1</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="d04d408f-a237-4268-b6d4-aff469265f4f" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">👨‍💻</span></div><h1 class="page-title">Перечень команд на воркшоп 1</h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-created_by"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedBy"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 10.4229C6.05176 10.4229 4.54785 11.1133 3.83008 11.9131C2.90039 10.9082 2.33301 9.55469 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 9.55469 13.1064 10.9082 12.1699 11.9131C11.4521 11.1133 9.94824 10.4229 8 10.4229ZM8 9.30176C9.32617 9.30859 10.3516 8.18066 10.3516 6.71094C10.3516 5.33008 9.31934 4.18164 8 4.18164C6.6875 4.18164 5.6416 5.33008 5.64844 6.71094C5.65527 8.18066 6.68066 9.28809 8 9.30176Z"></path></svg></span>Created by</th><td><span class="user"><img src="https://lh3.googleusercontent.com/a/ACg8ocKYrYwOlWyp4EEa-4vmpwcrYC0nyB5RtrmpLjngy9qPpsg=s100" class="icon user-icon"/>Anton Mirko</span></td></tr><tr class="property-row property-row-created_time"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedAt"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.54102 8.91211H7.99316C8.30078 8.91211 8.54004 8.67285 8.54004 8.37207V3.8877C8.54004 3.58691 8.30078 3.34766 7.99316 3.34766C7.69238 3.34766 7.45312 3.58691 7.45312 3.8877V7.83203H4.54102C4.2334 7.83203 4.00098 8.06445 4.00098 8.37207C4.00098 8.67285 4.2334 8.91211 4.54102 8.91211Z"></path></svg></span>Created time</th><td><time>@January 24, 2024 1:19 AM</time></td></tr><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Tags</th><td><span class="selected-value select-value-color-red">Docker</span><span class="selected-value select-value-color-purple">Docker-Compouse</span></td></tr></tbody></table></header><div class="page-body"><figure id="7a1813ef-3a15-4b78-ac83-d263a1f2bcdf" class="image"><a href="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled.png"><img style="width:84px" src="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled.png"/></a></figure><h1 id="19802ed7-1e76-45d1-b0af-e89b9525e210" class="block-color-red">                                     Привет комрад !</h1><p id="da0e54da-1ce2-454d-85d7-cd009ec633b8" class="">Данная страница нужна для того, чтобы ты мог всегда обратиться к командам нашего воркшопа. Тут будут описаны все Docker команды нашего первого модуля.</p><blockquote id="bd084e54-e7bf-4370-a398-8cb5f7c0b3a3" class="">Ты должны проверить, что у тебя установлен <mark class="highlight-yellow"><strong>Docker</strong></mark> и <mark class="highlight-yellow"><strong>Docker Compose<br/><br/></strong></mark><mark class="highlight-default">Команды используемые в данном конспекте подходят для систем linux и macos</mark></blockquote><h1 id="68d7509e-bf3d-4699-ae56-95efeca6a8d5" class="block-color-yellow"><mark class="highlight-purple">Подготовка рабочей зоны</mark></h1><p id="5ae91662-8529-4a74-9ab4-f32d0c412112" class="">Выполняйте команды последовательно одна за одной</p><h3 id="d4ee8760-fa34-43be-92fb-31c11d3fda00" class=""><mark class="highlight-brown">docker images</mark></h3><p id="71e77a4f-7b9a-4522-9aeb-4edd338050e6" class="">Данная команда показывает все изображения верхнего уровня, их репозиторий и теги, а также их размер. </p><p id="58a1e8e3-d149-4643-9a09-8dd94964be0b" class="">Давай проверим, что у тебя images пустой и чистый. Если у тебя чем-то заполнены образы, то стоит их удалить для этого понадобится следующая команда.</p><h3 id="1e46afd1-58d6-455d-b5f9-c37b41dc968d" class=""><mark class="highlight-brown">docker rmi -f &lt;image_id&gt;</mark></h3><p id="6d99c92b-cfd4-45db-a5f5-875d899ef4e3" class="">Данная команда позволяет удалить не нужный образ из системы. Стоит учесть, что если образ как-то используется, то стоит использовать дополнительный атрибут -f. Теперь давай проверим, что наш образ был удален.</p><h3 id="5475af82-03e9-4271-9e99-1fa1e3062617" class=""><mark class="highlight-brown">docker images</mark></h3><p id="27a47b43-326f-4dc4-9148-28f51f848c02" class="">После вызова данной команды мы должны быть убеждены, что старый образ был удален из системы.</p><h2 id="5820de31-bacd-444f-8ffa-3e059e6e51d3" class=""><mark class="highlight-teal">Работа с Nginx</mark></h2><h3 id="abc1b767-78aa-494b-a002-970c66016b22" class=""><mark class="highlight-brown">docker run nginx:latest</mark></h3><p id="bcfc1423-33f5-4421-ac9d-6aad796d56b8" class="">Данная команда запускает новый контейнер, при необходимости извлекая образ и запуская его. В данном случае мы указали версию latest, чтобы не запариваться с конкретной версией, но если для нас важна конкретная версия, то ты можешь её указать вместо latest. В данной команде не указана привязка портов локального компьютера и докер контейнера. Чтобы начать работать с nginx надо прописать привязку портов.</p><blockquote id="fe9f4e10-20d0-4160-8f9a-665a4cb2cf47" class=""><mark class="highlight-gray">Чтобы остановить работу контейнера нужно вызвать комбинацию Control + C</mark></blockquote><h3 id="343bbf9b-2db7-4e94-bc3e-bef6cebc3690" class=""><mark class="highlight-brown">docker run -p 80:80 nginx:latest</mark></h3><p id="13186176-16df-4a30-8dad-68451d67c685" class="">В данной команде мы привязали порт 80 нашего компьютера с 80 портом внутри контейнера. Теперь мы можем вызвать локально <a href="http://localhost">http://localhost</a>  и увидеть работу нашего nginx. Теперь давай посмотрим на количество наших контейнеров в системе.</p><blockquote id="2a2d8f13-909a-4dc7-b168-56303290e49c" class=""><mark class="highlight-gray">Чтобы остановить работу контейнера нужно вызвать комбинацию Control + C</mark></blockquote><h3 id="f7deffc5-2125-49b2-849d-439bf4d0827b" class=""><mark class="highlight-brown">docker ps -a</mark></h3><p id="c5d5ac71-bd19-4f6e-b312-a0b4220d4b9f" class="">Данная команда служит для того, чтобы показать список всех наших контейнеров. Чтобы увидеть перечень активных контейнеров, нужно убрать атрибут -a. Давайте запустим один из наших контейнеров</p><h3 id="de399859-b034-4346-96f3-79424c58d7e4" class=""><mark class="highlight-brown">docker start &lt;container_name&gt;</mark></h3><p id="26bb9014-4658-462c-aaab-490e8a5fcd29" class="">Данная команда позволяет запустить наш контейнер, который был ранее собран в нашей системе. Хочу уточнить, что если во время сборки был использован атрибуты типа -p, то при повторном запуске через эту команду не нужно его водить. Давайте подключимся к нашему запущенному контейнеру.</p><h3 id="4ca3c796-1dc1-4ee5-81c4-d8920fe234b4" class=""><mark class="highlight-brown">docker attach &lt;container_name&gt;</mark></h3><p id="bb6d4b8e-067e-4249-8df8-46651af9e568" class="">Данная команда нужна, чтобы прикрепить стандартный ввод, вывод и ошибку нашего терминала (или любую их комбинацию) к работающему контейнеру, используя идентификатор или имя контейнера. Давай те остановим работу запущенного контейнера.</p><blockquote id="3a06c30f-6fbe-4b42-b444-6f51c1b86b61" class=""><mark class="highlight-gray">Чтобы остановить работу контейнера нужно вызвать комбинацию Control + C</mark></blockquote><h3 id="0fc75067-e1c8-499c-9245-91181e09a029" class=""><mark class="highlight-brown">docker stop &lt;container_name&gt;</mark></h3><p id="502b8712-de16-4222-86bc-2b67cddfd713" class="">Данная команда останавливает работу нашего запущенного контейнера. Давайте попробуем запустить контейнер без вывода текста на экран.</p><h3 id="afc6408e-d89d-4c09-9687-01be6cce48c4" class=""><mark class="highlight-brown">docker ps</mark></h3><p id="530ec113-43fb-4458-8189-4a4839fa8ec3" class="">Данная команда служит для того, чтобы увидеть перечень активных контейнеров. Что-бы убедится в том, что наш контейнер остановился.</p><h3 id="623c7d85-1222-42e9-a85b-17ea95f4dec9" class=""><mark class="highlight-brown">docker run -p 80:80 -d nginx:latest</mark></h3><p id="a15273b8-2d48-4abd-8a7f-e91e6006e7c9" class="">Данная команда заставит запустить наш контейнер в режиме демона и не будет выводить текст контейнера на экран.</p><h3 id="723e5345-092c-48d3-ba0b-2ce359b0b45b" class=""><mark class="highlight-brown">docker ps</mark></h3><p id="68584eb7-27c3-4fba-9b94-257a619e701a" class="">Нужно найти имя контейнера</p><h3 id="66d645c0-7fde-40b4-92b1-192bce6e99d0" class=""><mark class="highlight-brown">docker stop &lt;container_name&gt;</mark></h3><p id="6c493486-57da-42d2-978c-acb1a388eb98" class="">Данная команда останавливает работу нашего запущенного контейнера.</p><h3 id="ed49c6e7-7ceb-467a-a227-86369ee00db2" class=""><mark class="highlight-brown">docker ps</mark></h3><p id="b36ffdcc-a646-4b80-9606-a4c02ad5a742" class="">Данная команда служит для того, чтобы увидеть перечень активных контейнеров. Что-бы убедится в том, что наш контейнер остановился.</p><h2 id="7a083a8a-aa0a-4f26-ba72-f0eba9a3ccee" class=""><mark class="highlight-teal">Привязка томов</mark></h2><h3 id="5d394356-123d-4dc1-9779-61006843b1cc" class=""><mark class="highlight-brown">mkdir -p workshop_1/site</mark></h3><p id="2b55be53-b5c5-4e7c-b68c-c2cfe698fc02" class="">Давай начнём с того, что создадим папку для нашей привязки. Давайте проверим, что папка создалась.</p><h3 id="f8c17b07-fa22-4f78-98ab-9d9f56e6e9f9" class=""><mark class="highlight-brown">ls -la</mark></h3><p id="2bab1ded-3430-4f06-a58f-46d23426d325" class="">Смотрим что папка создана. Дальше нужно перейти в папку и получить путь к ней.</p><h3 id="6fc7c9a0-ffd7-45c7-9694-bf51a0aaa63a" class=""><mark class="highlight-brown">cd workshop_1/site; pwd</mark></h3><p id="ed6b2ed4-1014-4166-8aad-fd593b5dd899" class="">К нам выведется на экран путь к папке, сохрани его и потом используй в команде докера.</p><h3 id="5ec3395c-691d-4d10-b4b8-fc46e535574a" class="block-color-brown">docker run -d -p 80:80 -v &lt;local_path&gt;:/usr/share/nginx/html:ro nginx:latest</h3><p id="960c0d4f-89cb-4cdc-90d1-59c165b48913" class="">В local_path нужно передать путь из прошлой команды. Теперь давай перейдем на страницу <a href="http://localhost">http://localhost</a> и обновим её, должно показать 403 forbidden. Это все из-за того, что наша папка пустая и в ней нету файла index.html. Давайте создадим наш собственный сайт. Давай перейдём на сайт озона <a href="https://www.ozon.ru/">https://www.ozon.ru/</a> и нажмем на кнопку “Сохранить как” нужно выбрать нашу папку site. Дальше перейдем в нашу папку и переименуем файл *.html на index.html. Теперь переходим обратно на наш <a href="http://localhost">http://localhost</a> и наблюдаем за результатом. Давай остановим наш контейнер.</p><h3 id="53d59bb7-e3bd-4143-83ea-d3e2a68dea3a" class="block-color-brown">docker stop &lt;container_name&gt;</h3><p id="a585a3fd-6395-418c-9e5c-f0955dfde049" class="">Данная команда останавливает работу нашего запущенного контейнера.</p><h3 id="8baca2d1-7d6c-4b8f-be58-8dd578a8c932" class="block-color-brown">docker ps</h3><p id="cef89564-be85-43de-824b-d67175b7fbfa" class="">Данная команда служит для того, чтобы увидеть перечень активных контейнеров. Что-бы убедится в том, что наш контейнер остановился.</p><h1 id="26114884-5683-4bb5-9f86-0d4f795e6631" class=""><mark class="highlight-purple">Переносим наш сайт в Dockerfile</mark></h1><h3 id="45e11f01-535c-474a-88ac-93d374f199cb" class="block-color-brown">cd ..</h3><p id="4db014e2-bd48-43a9-a974-8701fea75074" class="">Данная команда переходит на одну папку назад. Нам это надо для того, чтобы у нас был доступ до всей папки site. Давай проверим, что папка создана</p><h3 id="0608a6c0-b085-4fd9-854a-ff2020e1da2c" class="block-color-brown">ls -la</h3><p id="aef81b81-c8fe-4909-83bb-1635f5072680" class="">Смотрим что папка создана. Далее нам нужно создать файл, а именно Dockerfile</p><h3 id="ab95942a-7a31-4735-8402-7bea4adaff71" class="block-color-brown">cat &gt; Dockerfile &lt;&lt; EOF</h3><p id="3c730987-1126-4da9-a27e-58a62b1b3274" class="">Библиотека cat позволяет нам создать файл и записать внутрь него текст. Чтобы остановить процессы записи в файл нужно на новой строке написать строчку EOF. Давай заполним файл нужной нам информацией. <strong>Далее пишем данные внутрь файла</strong>.</p><h3 id="96448827-72cc-4f78-aac8-06cb56db0ecb" class="block-color-orange">FROM nginx:latest</h3><p id="3f5fe7c4-24f8-4596-a371-7f1e7f8f286f" class="">Данная команда внутри Dockerfile указывает какой образ будет браться за основу для выполнения своих задач. В данном случае мы указали, что хотим использовать nginx последней версии. Далее давай перенесем нашу папку site внутрь доке образа.</p><h3 id="c5f460cf-2abf-46bc-9290-d4a0bf26bb64" class="block-color-orange">COPY [&quot;site&quot;,&quot;/usr/share/nginx/html&quot;]</h3><p id="d17ad910-e612-45a1-9e88-782c738bf95e" class="">Команда copy сохранит нужные нам данные по пути который мы указали в команде. Больше не нужно будет писать атрибут -<strong>v</strong>, чтобы указать путь. Закрываем запись в файл.</p><h3 id="ae559719-11ae-424d-ad05-8de49f0db6f4" class="block-color-orange">EOF</h3><p id="ff42020d-dd73-4ff8-8295-9988fa41c7ed" class="">Останавливаем запись в файл. Теперь давай запустим сборку нашего образа. Выход из записи файла. Дальше пишем другие команды.</p><h3 id="b56f6872-3f9d-43a6-9bc3-cb91ea4329e5" class="block-color-brown">docker build . -t ozon-site:latest</h3><p id="a12c5dfe-ce62-45a7-a13f-210d347e2096" class="">Данная команда собирает образ нашего контейнера. В данном случае атрибут t нужен для того, чтобы дать удобное нам наименование образа. Теперь давай запустим наш образ.</p><h3 id="ebb82083-bace-435b-9c2b-d52f91224aa8" class="block-color-brown">docker run --name ozon-site-container -d -p 80:80 ozon-site:latest</h3><p id="fd56240a-0947-4850-97a1-f9cca31674ab" class="">Давай проверим, что наш сайт запустился и он работает <a href="http://localhost">http://localhost</a>.  Как ты видишь мы использовали новый атрибут --name, он позволяет жестко задать имя нового контейнера. Но есть одна проблема, если вы захотите повторно запустить контейнер, то нам придется писать не run, а start по имени. После проверки того, что наш сайт работает давай остановим работу нашего контейнера.</p><h3 id="04e85d70-bec6-4484-9120-37f9baa49996" class="block-color-brown">docker stop ozon-site-container</h3><p id="451cbee9-429e-47a9-8bda-27dae6afc7a8" class="">Останавливаем работу нашего контейнера.</p><h3 id="4a43c02f-b181-453d-9c5f-d63c570c55d8" class="block-color-brown">docker ps</h3><p id="ea59ee7a-9529-47c6-9a60-764ac1fd5fd1" class="">Проверяем, что контейнер завершил свою работу.</p><h1 id="bd654e25-b92a-4915-86ba-1fbbccc3bf13" class=""><mark class="highlight-purple">Создаем наш docker compose файл для проекта</mark></h1><p id="dfb85075-33b7-4552-8846-6501cf73883f" class="block-color-gray"><mark class="highlight-default">В данной части нашего воркшопа, мы перейдем к docker compose и выкачиванию нашего учебного проекта из gitlab хранилища. Для повторения моей работы, ты можешь форкнуть </mark><mark class="highlight-default"><strong><a href="https://gitlab.ozon.dev/cs/classroom-10/experts/Practice">проект</a></strong></mark><mark class="highlight-default"> к себе и отвязать от Practice.</mark></p><h3 id="d931444a-b24c-4ad6-acd0-8ae278116627" class="block-color-blue">Выкачать (форк) проект к себе из ветки master</h3><p id="0fc5e84b-9b2a-4db2-b759-37b3275bc5c6" class="">После того как мы открыли проект, нужно обратить внимание на расположение файлов внутри нашего решения. Если ты используешь Rider, то ide автоматически создаст 3 папки: common, src, tests. Если ты используешь не Rider, то рекомендую перейти к схожей системе разбиения проектов. </p><figure id="62572529-ca1e-4cd0-b98b-15b54476df24" class="image"><a href="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%201.png"><img style="width:480px" src="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%201.png"/></a></figure><p id="ec09bd5c-50fe-4a9b-af98-46b5bc30564a" class="">Давайте рассмотрим каждую из папок по отдельности.</p><p id="a3c0b291-bb30-4381-9b74-f0851ae5f83f" class=""><strong>Common</strong> - в данной папке находятся все файлы не связанные с src/tests. Конфигурационные файлы, настройки ide, gitignore, dockerignore и можество другого.</p><p id="48e3def7-0155-4d3f-bec3-90249c92f268" class=""><strong>Src</strong> - данная папка хранит в себе нашу проектную часть. Другими словами слои нашего сервиса.</p><p id="dac75bb1-614c-4b42-9c4d-8bda8f935d5b" class=""><strong>Tests</strong> - как и понятно из названия эта папка хранит в себе тестовые сценарии нашего сервиса.</p><h3 id="060c9530-d691-4336-8c2b-50a4d1f68ad4" class="block-color-blue">Создаём новый проект с названием CustomerService</h3><p id="b37bed5c-5a05-4aa0-86ff-e19123bf5977" class="">Для нашего проекта нужно создать еще один сервис, данный сервис должен быть заполнен базовой реализацией. Потому мы можем просто добавить внутрь нашего решения новый проект и выбрать шаблон: <strong>ASP.NET Core Web Application</strong>. В открытом окне, выбери место хранения (советую использовать в <strong>Project directory</strong> нашу <strong>src</strong> папку)</p><figure id="aa23af09-7571-49ad-bd85-52d299e33eb8" class="image"><a href="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%202.png"><img style="width:1606px" src="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%202.png"/></a></figure><p id="17e02695-4019-4155-9544-37faeae12d47" class="">Название проекта должно соответствовать общему паттерну наименования. В пункте <strong>Type</strong> стоит выбрать <strong>Web API. </strong>Обязательно выберете в пункте <strong>Docker Support</strong> - <strong>Linux</strong>. Также стоит обратить внимание на пункт <strong>Auth</strong>, его лучше отключить.</p><p id="b12b9c66-a0ba-4a95-b4a3-dcc8c14f7a67" class="">Также нужно поправить Program.cs файл, пример того как он должен выглядеть будут представлен ниже</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="17dcdae1-4f70-4b1f-a66c-548af8658d48" class="code"><code class="language-C#" style="white-space:pre-wrap;word-break:break-all">var builder = WebApplication.CreateBuilder(args);

// Add services to the container.

builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

app.UseSwagger();
app.UseSwaggerUI();

app.UseHttpsRedirection();

app.MapControllers();

app.Run();</code></pre><h3 id="d41c61a0-4d73-47fb-afed-969ff6ecaa06" class="block-color-blue">Исправляем шаблонный Dockerfile проекта CustomerService</h3><p id="4ae0c79e-291c-4538-af67-7413e22648cb" class="">Как только будет готов стандартный докерфайл, то стоит его подправить для правильной работы в нашем docker-compose. Для это посмотрите на правильно сконфигурированный файл и замените на нужные строки или может просто скопировать и сохранить.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="0f35546f-0f96-4ffd-9044-8ee37a833d7e" class="code"><code class="language-Docker">FROM mcr.microsoft.com/dotnet/aspnet:6.0 AS base
WORKDIR /app
EXPOSE 80
EXPOSE 443

FROM mcr.microsoft.com/dotnet/sdk:6.0 AS build
WORKDIR /src
COPY [&quot;Ozon.Route256.Practice.CustomerService.csproj&quot;, &quot;src/Ozon.Route256.Practice.CustomerService/&quot;]
RUN dotnet restore &quot;src/Ozon.Route256.Practice.CustomerService/Ozon.Route256.Practice.CustomerService.csproj&quot;
WORKDIR &quot;/src/Ozon.Route256.Practice.CustomerService&quot;
COPY . .
RUN dotnet build &quot;Ozon.Route256.Practice.CustomerService.csproj&quot; -c Release -o /app/build

FROM build AS publish
RUN dotnet publish &quot;Ozon.Route256.Practice.CustomerService.csproj&quot; -c Release -o /app/publish /p:UseAppHost=false

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT [&quot;dotnet&quot;, &quot;Ozon.Route256.Practice.CustomerService.dll&quot;]</code></pre><blockquote id="48358a34-7f83-4917-98d2-2a5959d79a63" class="">Если интересно узнать, почему именно так сформирован докерфайл, то стоит обратится в открытые источники и узнать у microsoft. Это не входит в план обучения route 256.</blockquote><h3 id="9927f54c-43e3-41ee-b8d5-1634d60b31d5" class="block-color-blue">Изучаем gitlab-ci и добавляем джобы для нового сервиса</h3><p id="554cf023-325d-4274-8ba6-0cf4acdb7ad8" class="">В данном блоке мы погрузимся в джобы gitlab ci/cd. Постараюсь рассказать, что за джобы у нас уже есть и мы увидим какие будут добавлены.</p><figure id="06a99c00-394c-4d31-a869-44302a3b463c" class="image"><a href="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%203.png"><img style="width:480px" src="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%203.png"/></a></figure><p id="03475e02-d136-445f-8ca0-6449043fefd3" class="">Файл gitlab-ci лежит в папке common (либо рядом с файлом sln). Давай рассмотрим его внимательно. Начнем с первой строчки <code>image</code><code><strong>: </strong></code><code>docker:latest</code> - данная строчка указывает на образ Docker, в котором выполняется задание.</p><blockquote id="9d879a6d-b3bf-44a5-a63f-a3e4f081bc6e" class="">Если интересно прочитать больше, то можете перейти по <a href="https://docs.gitlab.com/ee/ci/variables/where_variables_can_be_used.html">этой ссылке</a></blockquote><p id="730e22ac-8c39-4d71-9377-0c1efdf343d1" class="">Далее мы определяем на группы джоб или другими словами стадии нашего pipeline. </p><p id="0e25e156-043c-4f92-8adc-a5ded188237a" class=""><code>stages</code><code><strong>:  <br/>  - <br/></strong></code><code>build_images  <br/>  <br/></code><code><strong>- </strong></code><code>customer service</code></p><p id="d1ed7dcb-9db6-4dfe-bec0-9374a3916af8" class="">В данном кусочке кода мы указали, что у нас будет две отдельные стадии: <code>build_images</code> и <code>customer service</code></p><p id="82c16f95-ea63-4ddf-97e9-6c934a61fad0" class="">Следующая часть нашего файла <strong>services</strong> - указание на любые дополнительные образы Docker, которые необходимы вашим сценариям для успешного запуска.</p><p id="6520c1de-42e0-4341-a84b-f8a0f03ac8df" class=""><code>services</code><code><strong>:<br/>  - <br/></strong></code><code>name</code><code><strong>: </strong></code><code>docker:dind</code></p><p id="10d982f3-95a2-4e43-bdba-73bc9849e206" class="">Далее давайте рассмотрим последний важный блок для нашего проекта. Создание собственных образов контейнера для нашей работы. </p><p id="429f886c-24db-4757-bc63-638ffd39c449" class=""><code>service_discovery</code><code><strong>: <br/>  <br/></strong></code><code>stage</code><code><strong>: </strong></code><code>build_images<br/>  rules<br/></code><code><strong>:<br/>    - <br/></strong></code><code>when</code><code><strong>: </strong></code><code>manual<br/>  script<br/></code><code><strong>:<br/>    - <br/></strong></code><code>docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY<br/>    <br/></code><code><strong>- </strong></code><code>docker buildx create --use<br/>    <br/></code><code><strong>- </strong></code><code>docker buildx build --provenance false --platform linux/amd64,linux/arm64 -t gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/service-discovery:latest --push ./src/Ozon.Route256.Practice.ServiceDiscovery</code></p><p id="dafefb46-315f-44f8-87c6-1999fc4bcdf7" class="">Эта джоба выполняет подключение к нашему регистру образов, компилирует образ и пушит его с версией latest.</p><p id="a822e253-f535-4663-9165-aa2ecf765510" class=""><code>stage</code> - указывает в какой группе джоб, будет запускаться это джоба</p><p id="0bffd85e-a3a2-44a6-976b-891285d1725e" class=""><code>rules</code> - указывает правила запуска джобы, в нашем случае это нажатие через кнопку</p><p id="609cbf25-d43c-4857-ac75-4a8708a12bf0" class=""><code>script</code> - тело самой джобы, что будет выполняться джобой внутри нашего образа.</p><p id="983f0656-1dc6-4f48-8de6-f254046284fb" class="">Давайте посмотрим на целый файл gitlab-ci.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="12ee832a-e16e-4645-8161-a58e2f8b6aba" class="code"><code class="language-Docker">image: docker:latest

stages:
  - build_images
  - customer service

services:
  - name: docker:dind

service_discovery:
  stage: build_images
  rules:
    - when: manual
  script:
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker buildx create --use
    - docker buildx build --provenance false --platform linux/amd64,linux/arm64 -t gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/service-discovery:latest --push ./src/Ozon.Route256.Practice.ServiceDiscovery

logistics_simulator:
  stage: build_images
  rules:
    - when: manual
  script:
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker buildx create --use
    - docker buildx build --provenance false --platform linux/amd64,linux/arm64 -t gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/logistics-simulator:latest --push ./src/Ozon.Route256.Practice.LogisticsSimulator

orders_generator:
  stage: build_images
  rules:
    - when: manual
  script:
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker buildx create --use
    - docker buildx build --provenance false --platform linux/amd64,linux/arm64 -t gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/orders-generator:latest --push ./src/Ozon.Route256.Practice.OrdersGenerator
      
customer_service:
  stage: build_images
  rules:
    - when: manual
  script:
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker buildx create --use
    - docker buildx build --provenance false --platform linux/amd64,linux/arm64 -t gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/customer-service:latest --push ./src/Ozon.Route256.Practice.CustomerService

# Пример customer service
build:
  stage: customer service
  image: mcr.microsoft.com/dotnet/sdk:6.0
  needs: []
  script:
    - dotnet restore src/Ozon.Route256.Practice.CustomerService/Ozon.Route256.Practice.CustomerService.csproj
    - dotnet build src/Ozon.Route256.Practice.CustomerService/Ozon.Route256.Practice.CustomerService.csproj --no-restore

test:
  stage: customer service
  image: mcr.microsoft.com/dotnet/sdk:6.0
  needs: [&quot;build&quot;]
  script:
    - dotnet restore src/Ozon.Route256.Practice.CustomerService/Ozon.Route256.Practice.CustomerService.csproj
    - dotnet build src/Ozon.Route256.Practice.CustomerService/Ozon.Route256.Practice.CustomerService.csproj --no-restore</code></pre><p id="fcf2dc30-f7dd-4049-b2e3-f8533516c592" class="">Зеленым цветом выделена та часть, которую мы добавили на это занятии. Предлагаю ознакомится с ней самостоятельно.</p><h3 id="2cd9970d-fcbc-4ede-b014-4a5fbc3900e3" class="block-color-blue">Формируем наш docker-compose файл</h3><p id="5dfd04cb-0bc3-49ce-a7f6-21e64b247b3f" class="">Хочу напомнить наш проект, который мы будем делать все эти 8-мь недель. Ниже представлена картинка со второго занятия наших лекций. Нам нужно развернуть необходимую инфраструктуру для проектов, потому на этом занятии мы будем писать наш docker-compose.</p><figure id="d7d937ec-4bad-404e-890e-0f922a3e1507" class="image"><a href="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%204.png"><img style="width:864px" src="%D0%9F%D0%B5%D1%80%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%20%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%20%D0%BD%D0%B0%20%D0%B2%D0%BE%D1%80%D0%BA%D1%88%D0%BE%D0%BF%201%20d04d408fa2374268b6d4aff469265f4f/Untitled%204.png"/></a></figure><p id="436e676c-26e4-48b6-bb94-3fbc6f81ebf6" class="">Предлагаю создать наш docker compose файл, советую его расположить рядом с солюшеном нашего проекта. Теперь давай начнём заполнять файл.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4514ad06-4d46-40ab-a31c-e99250901371" class="code"><code class="language-Docker">version: &quot;3.9&quot;

volumes:
  customer-service-db:
    name: customer-service-db

services:</code></pre><p id="f3706d6e-0908-4040-a8f1-81a28d85245d" class="">Что мы вписали в данном разрезе нашего docker-compose.yml файла.<br/><br/><mark class="highlight-purple">version</mark><mark class="highlight-yellow"> </mark><mark class="highlight-default">- указали версию docker-compose</mark></p><p id="1822e138-cfad-4282-815f-12104a1fac17" class=""><mark class="highlight-purple">volumes </mark><mark class="highlight-default">- провели объединение нашего хранилища и хранилища внутри docker контейнера.</mark></p><p id="2d318b4b-3b6f-4f02-9cf5-673a5e51a4d8" class=""><mark class="highlight-purple">services </mark><mark class="highlight-default">- будем прописывать наши сервисы, с которыми мы хотим работать</mark></p><p id="60007285-a4ec-43b1-af47-3c2d477af149" class="">
</p><p id="931cc812-b2d3-4d72-88d8-ab8a65ee5f93" class="">Давайте перейдём к написанию сервисов.</p><h3 id="96520aa1-b0b5-4348-9a2a-8791dbd692be" class="">Добавляем CustomerService</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="b3e55f81-da0e-4776-a01f-250f57874d78" class="code"><code class="language-Docker">customer-service:
    build:
      context: ./src/Ozon.Route256.Practice.CustomerService
      dockerfile: Dockerfile
    container_name: customer-service
    ports:
      - &quot;5081:80&quot;</code></pre><p id="a5568e71-d241-43e0-89bb-60fbe22944d9" class="">Мы прописали в нашем файле, как мы хотим запускать наш сервис Customer. Для этого мы в блоке <mark class="highlight-purple">build</mark><mark class="highlight-default"> указали откуда стоит брать Dockerfile для запуска. Остальные пункты, мы уже рассматривали ранее на занятии.</mark></p><h3 id="634b6b0d-9416-4cfa-b61a-fe3186ccbd65" class="">Добавляем CustomerServiceDb</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="020e6e06-5ed3-4e27-8e3e-f2240ea946d9" class="code"><code class="language-Docker">customer-service-db:
    image: postgres:latest
    container_name: customer-service-db
    environment:
      - POSTGRES_DB=customer-service
      - POSTGRES_USER=test
      - POSTGRES_PASSWORD=test
    ports:
      - &quot;5400:5432&quot;
    volumes:
      - customer-service-db:/var/lib/postgresql/data</code></pre><p id="65d5e921-9fd0-4ea4-aed3-ea9a7c9d3ba9" class="">Данный блок является стандартным и его можно легко найти в интернете, кроме пункта связки томов нашего компьютера и докер контейнером. Данная привязка будет нужна будет тебе дальше в курсе.</p><h3 id="eae4c98d-1ee8-4278-9328-03dcac1b4e8f" class="">Добавляем OrdersGenerator</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="b5c90db7-0477-4d14-baff-b6225530597a" class="code"><code class="language-Docker">orders-generator-web:
    image: gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/orders-generator:latest
    container_name: orders-generator-web
    environment:
      - ROUTE256_ORDER_SOURCE=WebSite

  orders-generator-mobile:
    image: gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/orders-generator:latest
    container_name: orders-generator-mobile
    environment:
      - ROUTE256_ORDER_SOURCE=Mobile

  orders-generator-api:
    image: gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/orders-generator:latest
    container_name: orders-generator-api
    environment:
      - ROUTE256_ORDER_SOURCE=Api</code></pre><p id="54f17451-1ffd-4d01-8157-51adb114ed7f" class="">В данном сервисе, мы решили использовать не локальный образ сервиса, а взять его из нашего хранилища. В <mark class="highlight-purple">environment</mark><mark class="highlight-default"> мы используем разные настройки, это вы поймет позже проходя по курсу, зачем на это.</mark></p><h3 id="0a8a5fd0-8287-4e20-846c-613331f26b71" class="">Добавляем ServiceDiscovery</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="ed33fcac-3bf2-4318-8cb1-02f3446dff73" class="code"><code class="language-Docker">service-discovery:
    image: gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/service-discovery:latest
    container_name: service-discovery
    environment:
      - ROUTE256_DB_STATE=cluster:0-9:db1:1543;cluster:10-19:db2:1543;cluster1:0:db3:1543
      - ROUTE256_UPDATE_TIMEOUT=10</code></pre><p id="43891bb1-59c8-4611-b34c-0c4fc882b3e0" class="">Данный сервис также особо ничем не отличается от OrderGenerator.</p><h3 id="ae356761-73a5-4e9c-8aec-0421662b1c47" class="">Добавляем LogisticSimulator</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="edf9e776-e879-4a50-b116-88039600622b" class="code"><code class="language-Docker">logistic-simulator:
    image: gitlab-registry.ozon.dev/cs/classroom-10/experts/practice/logistics-simulator:latest
    container_name: logistic-simulator</code></pre><p id="a684b21e-c36f-445d-9847-4078ade087df" class="">Данный сервис также особо ничем не отличается от OrderGenerator.</p><h3 id="c31e0355-e5e1-48e8-bb09-c2917c6fd108" class="">Добавляем Zoookeeper и Kafka</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1aed12dc-15ae-4d4c-971e-324b402c6482" class="code"><code class="language-Docker">zookeeper:
    image: confluentinc/cp-zookeeper:7.3.2
    container_name: zookeeper
    ports:
      - &quot;2181:2181&quot;
    environment:
      ZOOKEEPER_SERVER_ID: &#x27;1&#x27;
      ZOOKEEPER_CLIENT_PORT: &#x27;2181&#x27;
      ZOOKEEPER_SERVERS: &#x27;zookeeper:2888:3888&#x27;
      ZOOKEEPER_PEER_PORT: &#x27;2888&#x27;
      ZOOKEEPER_LEADER_PORT: &#x27;3888&#x27;
      ZOOKEEPER_INIT_LIMIT: &#x27;10&#x27;
      ZOOKEEPER_SYNC_LIMIT: &#x27;5&#x27;
      ZOOKEEPER_MAX_CLIENT_CONNS: &#x27;5&#x27;
  
  broker-1:
    image: confluentinc/cp-kafka:7.3.2
    container_name: broker-1
    depends_on:
      - zookeeper
    ports:
      - &quot;29091:29091&quot;
    environment:
      KAFKA_BROKER_ID: &#x27;1&#x27;
      KAFKA_BROKER_RACK: &#x27;1&#x27;
      KAFKA_ZOOKEEPER_CONNECT: &#x27;zookeeper:2181&#x27;
      KAFKA_LISTENERS: &#x27;LISTENER_INTERNAL://:9091,LISTENER_LOCAL://:29091&#x27;
      KAFKA_ADVERTISED_LISTENERS: &#x27;LISTENER_INTERNAL://broker-1:9091,LISTENER_LOCAL://localhost:29091&#x27;
      KAFKA_INTER_BROKER_LISTENER_NAME: &#x27;LISTENER_INTERNAL&#x27;
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: &#x27;LISTENER_INTERNAL:PLAINTEXT,LISTENER_LOCAL:PLAINTEXT&#x27;
      KAFKA_DEFAULT_REPLICATION_FACTOR: &#x27;2&#x27;
  
  broker-2:
    image: confluentinc/cp-kafka:7.3.2
    container_name: broker-2
    depends_on:
      - zookeeper
    ports:
      - &quot;29092:29092&quot;
    environment:
      KAFKA_BROKER_ID: &#x27;2&#x27;
      KAFKA_BROKER_RACK: &#x27;2&#x27;
      KAFKA_ZOOKEEPER_CONNECT: &#x27;zookeeper:2181&#x27;
      KAFKA_LISTENERS: &#x27;LISTENER_INTERNAL://:9091,LISTENER_LOCAL://:29092&#x27;
      KAFKA_ADVERTISED_LISTENERS: &#x27;LISTENER_INTERNAL://broker-2:9091,LISTENER_LOCAL://localhost:29092&#x27;
      KAFKA_INTER_BROKER_LISTENER_NAME: &#x27;LISTENER_INTERNAL&#x27;
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: &#x27;LISTENER_INTERNAL:PLAINTEXT,LISTENER_LOCAL:PLAINTEXT&#x27;
      KAFKA_DEFAULT_REPLICATION_FACTOR: &#x27;2&#x27;</code></pre><p id="2d605351-59be-4f00-861a-aa46ddafdb21" class="">В данном куске нашего docker-compose.yml файла, мы добавили zookeeper и два брокера сообщений, как указано в нашем проекте.</p><p id="2d19fc92-bee9-4596-b80c-d66e142e6bab" class="">Теперь давайте перейдём к сборке и запуску нашего docker-compose.yml</p><h3 id="72cc2d84-4ad8-4c30-9acd-3fd1ac4745d1" class=""><mark class="highlight-blue">Запуск нашего docker-compose.yml</mark></h3><p id="45feff38-e9f2-4e28-8290-4a682c29a5ae" class="">Давай перейдём в папку, где мы создали docker-compose.yml</p><h3 id="7c74c40b-9568-47dd-bcea-b44a1ce6e264" class="block-color-brown">docker login <a href="https://gitlab-registry.ozon.dev/v2/cs/classroom-10/experts/practice">https://gitlab-registry.ozon.dev/v2/cs/classroom-10/experts/practice</a> -u amirko -p $ROUTE256_ACCESSTOKEN</h3><p id="236c391a-a327-46af-bb27-b32523a9ce8f" class="">Данная команда разрешит вам вытягивать образы наших сервисов из локального хранилища докер образов. В начале мы указываем путь к нашему хранилищу, далее указали наш пользовательский логин. Самый последний параметр - токен (его нужно будет оформить самостоятельно). После того как мы зарегистрировались, стоит провести сборку нашего проекта.</p><h3 id="ef44105d-6833-49cb-94f4-bc7639a0d2dc" class=""><mark class="highlight-brown">docker-compose build</mark></h3><p id="d01e7278-70cc-4fa1-b822-b4f08d52ff74" class="">Вызываем команду сборки наших проектов, так как у нас всего один проект билдиться из локальны данных, то будет запуск CustomerService. Далее как только билд пройдет нужно вызвать команду запуска наших контейнеров.</p><h3 id="c22d5692-1b10-42b0-bca1-af412780bfda" class=""><mark class="highlight-brown">docker-compose up</mark></h3><p id="f772bc85-8f91-41b0-9e25-0de55162c58e" class="">Данная команда запускает наши контейнеры и сервисы. После того как мы закончим работать можно вызывать остановку работы наших контейнеров.</p><blockquote id="519b8aa3-3bfc-41d7-9a80-0bb23f3ac743" class=""><mark class="highlight-gray">Чтобы остановить работу контейнера нужно вызвать комбинацию Control + C</mark></blockquote><h3 id="96b20953-d0d0-4c4c-accb-09e3f86862a5" class=""><mark class="highlight-brown">docker-compose down</mark></h3><p id="e2c97671-4256-488c-902b-da062d4d74aa" class="">Данная команда выключает все наши контейнеры. Как только вы решили завершить работу над проектом, то также стоит разлогинится из dockerю</p><h3 id="ab1b9f22-2952-4f44-bb37-146d95fbc33f" class=""><mark class="highlight-brown">docker logout</mark></h3><p id="62046848-7d69-465b-8443-0044468797f4" class="">Отключает от работы с внешним хранилищем образов docker.</p><h1 id="76d56495-7c86-4a0f-a134-89f1bf8bd7ad" class=""><mark class="highlight-default">На этом наш курс на сегодня закончился.</mark><mark class="highlight-red"> Спасибо всем за внимание.</mark></h1><p id="17091efa-f208-421b-a2e7-bf53ea72418c" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>